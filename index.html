<!DOCTYPE html>
<html>
  <head>
    <title>VR Command Center</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="js/components.js"></script>
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <!-- 2D HUD Overlay -->
    <div id="hud">
        <div class="scanlines"></div>
        <div class="hud-top">
            <div class="system-status">
                <div class="status-label">System Status</div>
                <div id="system-status-value" class="status-value">STANDBY</div>
            </div>
            <div class="system-status">
                <div class="status-label">User</div>
                <div class="status-value">ADMIN</div>
            </div>
        </div>
        
        <div class="crosshair"></div>
        <div id="interaction-hint" class="interactive-hint">Click to Interact</div>

        <div class="hud-bottom">
            <div id="message-log" class="message-log">
                <!-- Logs will appear here -->
            </div>
            <div class="system-status">
                <div class="status-label">Connection</div>
                <div class="status-value">SECURE</div>
            </div>
        </div>
    </div>

    <!-- 3D Scene -->
    <a-scene background="color: #000" renderer="antialias: true; colorManagement: true;">
      
      <!-- Environment -->
      <a-entity environment="preset: tron; grid: 1x1; playArea: 1.2; groundColor: #111; skyColor: #000"></a-entity>

      <!-- Lighting -->
      <a-light type="ambient" color="#222"></a-light>
      <a-light type="point" position="0 4 0" intensity="0.5" color="#0ff"></a-light>

      <!-- Main Console Desk -->
      <a-box position="0 0.8 -1.5" width="2" height="0.1" depth="0.8" color="#222" material="metalness: 0.8; roughness: 0.2"></a-box>
      
      <!-- Main Screen -->
      <a-entity position="0 1.4 -1.8" rotation="0 0 0">
          <a-plane width="1.6" height="0.9" color="#000" material="shader: flat; transparent: true; opacity: 0.8"></a-plane>
          <a-plane 
            id="main-screen"
            position="0 0 0.01" 
            width="1.5" 
            height="0.8" 
            color="#111" 
            clickable="action: activate-system"
            screen-display="targetEvent: activate-system; defaultColor: #111; activeColor: #003300"
            class="clickable">
            <a-text value="INITIALIZE SYSTEM" align="center" width="4" color="#0ff"></a-text>
          </a-plane>
      </a-entity>

      <!-- Side Screens -->
      <a-entity position="-1.4 1.3 -1.4" rotation="0 25 0">
        <a-plane width="1" height="0.6" color="#000" material="shader: flat; transparent: true; opacity: 0.8"></a-plane>
        <a-plane 
            position="0 0 0.01" 
            width="0.9" 
            height="0.5" 
            color="#222"
            clickable="action: access-data"
            class="clickable">
            <a-text value="DATA ARCHIVES" align="center" width="3" color="#f0f"></a-text>
        </a-plane>
      </a-entity>

      <a-entity position="1.4 1.3 -1.4" rotation="0 -25 0">
        <a-plane width="1" height="0.6" color="#000" material="shader: flat; transparent: true; opacity: 0.8"></a-plane>
        <a-plane 
            position="0 0 0.01" 
            width="0.9" 
            height="0.5" 
            color="#222"
            clickable="action: toggle-lights"
            class="clickable">
            <a-text value="LIGHT CONTROL" align="center" width="3" color="#ff0"></a-text>
        </a-plane>
      </a-entity>

      <!-- Holographic Floor Ring -->
      <a-ring position="0 0.1 0" rotation="-90 0 0" radius-inner="1" radius-outer="1.05" color="#0ff" material="shader: flat; transparent: true; opacity: 0.5">
          <a-animation attribute="rotation" to="-90 360 0" dur="10000" repeat="indefinite" easing="linear"></a-animation>
      </a-ring>

      <!-- Animal City Zone -->
      <a-entity position="3 0 0" rotation="0 -45 0">
          <!-- Zone Marker -->
          <a-cylinder position="0 0.05 0" radius="2" height="0.1" color="#228B22" opacity="0.5"></a-cylinder>
          <a-text value="ANIMAL CITY" position="0 2 0" align="center" color="#fff" look-at="[camera]"></a-text>

          <!-- Citizen 1: Boardgame -->
          <a-entity 
            id="citizen-boardgame"
            position="-0.5 0.5 0.5" 
            city-citizen="name: Gamer; dialog: ['Your move!', 'Checkmate!', 'Roll the dice.']"
            class="clickable">
            <a-gltf-model src="assets/models/after_the_rain_sound.glb scale="0.5 0.5 0.5"></a-gltf-model>
          </a-entity>

          <!-- Citizen 2: Shiny -->
          <a-entity 
            id="citizen-shiny"
            position="0.5 0.5 -0.5" 
            city-citizen="name: Shiny; dialog: ['I am so shiny!', 'Reflections everywhere.', 'Look at me!']"
            class="clickable">
            <a-gltf-model src="assets/models/shiny.glb" scale="0.25 0.25 0.25"></a-gltf-model>
          </a-entity>
          
          <!-- Citizen 3: KenyaPower
          <a-entity 
            id="citizen-kenyapower"
            position="4 3 3" 
            city-citizen="name: KenyaPower; dialog: ['I am so shiny!', 'Reflections everywhere.', 'Look at me!']"
            class="clickable">
            <a-gltf-model src="assets/models/ship_in_clouds.glb" scale="0.25 0.25 0.25"></a-gltf-model>
          </a-entity>-->
      </a-entity> 

      <!-- Camera Rig -->
      <a-entity id="rig" position="0 1.6 2">
        <a-camera look-controls wasd-controls>
            <a-cursor 
                color="#0ff" 
                fuse="true" 
                fuse-timeout="1500"
                raycaster="objects: .clickable"
                geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03">
                <a-animation attribute="scale" begin="click" dur="150" fill="forwards" to="0.1 0.1 0.1"></a-animation>
                <a-animation attribute="scale" begin="cursor-fusing" dur="1500" fill="forwards" from="1 1 1" to="0.1 0.1 0.1"></a-animation>
                <a-animation attribute="scale" begin="mouseleave" dur="500" fill="forwards" to="1 1 1"></a-animation>
            </a-cursor>
        </a-camera>
      </a-entity>

    </a-scene>
    <script src="js/main.js"></script>
  </body>
</html>